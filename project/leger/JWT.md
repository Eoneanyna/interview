# JWT鉴权的工作原理
- 用户登录：客户端发送凭据（如用户名/密码）到认证服务器

- 验证凭据：服务器验证凭据后生成JWT并返回给客户端

- 存储令牌：客户端存储JWT（通常在localStorage或cookie中）

- 后续请求：客户端在请求头中携带JWT（通常使用Authorization: Bearer <token>格式）

- 服务器验证：服务器验证JWT的有效性并处理请求

# JWT的组成部分
一个JWT由三部分组成，用点号分隔：

Header：包含令牌类型和签名算法

Payload：包含声明（用户信息和其他数据）

Signature：用于验证令牌完整性的签名

## 优点
- 无状态：服务器不需要存储会话信息，所有必要信息都包含在令牌中

- 跨域/跨服务支持：易于在微服务架构或跨域环境中使用

- 可扩展性：Payload可以包含自定义声明

- 安全性：使用签名防止篡改，可配合HTTPS加密传输

- 灵活性：可用于认证和授权，支持多种客户端

## 缺点
- 令牌大小：比session ID大，可能增加网络开销

- 无法即时失效：一旦签发，在过期前无法强制失效（除非使用额外机制）

- 安全性依赖实现：配置不当可能导致安全问题（如不使用HTTPS、弱签名算法）

- Payload非加密：默认只是Base64编码，敏感信息可能被解码查看

- 存储问题：客户端存储方式（如localStorage）可能面临XSS攻击风险


# Token被盗导致的冒用访问风险、恶意频繁请求导致的资源耗尽
   `问题本质：`
   如果攻击者获取了Authorization: Bearer <token>的内容（例如通过XSS攻击、网络嗅探、客户端日志泄露等），确实可以伪造请求冒用用户身份。

`可能后果：`

- 非授权访问用户数据

- 执行敏感操作（如转账、改密）

- 横向渗透（获取更高权限）

## 防御措施：
1. 后端有多重防御

HTTPS加密传输：防止网络嗅探

缩短Token有效期：通过exp字段设置较短过期时间（如30分钟）

敏感操作二次验证：如修改密码时需短信/邮箱验证

Token绑定设备指纹：在Payload中加入设备特征（如IP、User-Agent哈希），服务器验证一致性

JWT黑名单：虽然JWT本身无状态，但可对已泄露的Token记录黑名单（需牺牲部分无状态优势）

服务端资源保护：

对高耗能接口实施请求队列或熔断机制

监控异常流量（如单个Token的突发请求）

对异常IP进行拉黑处理

2. 前端安全存储

避免使用localStorage（易受XSS攻击）

优先使用HttpOnly Cookie（防XSS读取）

配合SameSite和Secure属性

## 总结
- 风险确实存在，但可通过分层防御大幅降低；

- JWT的无状态特性既是优势也是弱点，需结合业务场景权衡；

- 安全是一个持续过程，需定期审计和更新策略（如更换签名密钥）。